{"version":3,"sources":["../../src/pages/notifications/notificationsPage.module.ts","../../src/pages/notifications/notificationsPage.ts"],"names":[],"mappings":"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","file":"27.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { NotificationsPage } from './notificationsPage';\r\nimport { HsaloaderComponentModule } from '../../components/hsa-loader/hsa-loader.module';\r\n\r\nimport { MomentModule } from 'angular2-moment';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NotificationsPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(NotificationsPage),\r\n    HsaloaderComponentModule,\r\n    MomentModule\r\n  ],\r\n  exports: [\r\n    NotificationsPage\r\n  ]\r\n})\r\nexport class NotificationsModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notificationsPage.module.ts","import {Component,Inject} from '@angular/core';\r\nimport {IonicPage, NavController, NavParams} from 'ionic-angular';\r\nimport {Network} from '@ionic-native/network';\r\nimport {NotificationsProvider} from '../../providers/notifications';\r\nimport {IlocalUser} from '../../app/service/InewUserData';\r\nimport {INotification} from '../../app/service/interfaces';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-notifications',\r\n    templateUrl: 'notifications.html',\r\n})\r\nexport class NotificationsPage {\r\n    userLocal: IlocalUser;\r\n    isOnline: boolean = true;\r\n    initLimit: number = 10;\r\n    initStart: number = 0;\r\n    moreData: boolean = true;\r\n    showLoader: boolean;\r\n    netErr: boolean = false;\r\n    noData: boolean = false;\r\n    noUser: boolean = false;\r\n    AllNotifications: INotification[] | any = [];\r\n    constructor(\r\n     @Inject('API_URL') private API_URL,\r\n    @Inject('UPLOAD_PATH') private UPLOAD_PATH,\r\n        public navCtrl: NavController,\r\n        public navParams: NavParams,\r\n        public network: Network,\r\n        public notificationProvider: NotificationsProvider\r\n    ) {\r\n    }\r\n\r\n    ionViewWillEnter() {\r\n        if (!this.userLocal)\r\n            this.userLocal = JSON.parse(localStorage.getItem('userLocalData'));\r\n\r\n        if (this.userLocal) {\r\n            console.log(`this local ${this.userLocal}`);\r\n            [this.noUser, this.showLoader, this.noData, this.netErr] = [false, true, false, false];\r\n            this.getNotifications();\r\n        } else {\r\n            [this.noUser, this.showLoader] = [true, false];\r\n        }\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n\r\n\r\n\r\n        //this.getNotifications();\r\n        console.log('ionViewDidLoad Messages');\r\n        /*\r\n        this.network.onConnect().subscribe(data=>{\r\n          this.isOnline = true;\r\n        });\r\n    \r\n        this.network.onDisconnect().subscribe(data=> {\r\n          this.isOnline = false;\r\n        });\r\n    \r\n        */\r\n    }\r\n\r\n    ionViewWillLeave() {\r\n        this.AllNotifications = [];\r\n    }\r\n\r\n    refreshData(event) {\r\n        this.initStart = 0;\r\n        this.getNotifications(event);\r\n    }\r\n\r\n    getMoreData(event) {\r\n\r\n        this.initStart += this.initLimit;\r\n        this.notificationProvider\r\n            .getNotifications(this.userLocal.id, this.initLimit, this.initStart)\r\n            .subscribe(\r\n            ({status, data}) => {\r\n                if (status == 'success') {\r\n\r\n                    event.complete();\r\n                    this.AllNotifications = [...this.AllNotifications, ...data];\r\n                    console.log('data.length',data.length);\r\n                    console.log('this.initLimit',this.initLimit);\r\n                    if (data.length < this.initLimit) {\r\n                        this.moreData = false;\r\n                    } else {\r\n                        this.moreData = true;\r\n                    }\r\n                    console.log('this.moreData',this.moreData);\r\n                } else {\r\n\r\n                    event.complete();\r\n                    this.moreData = false;\r\n\r\n                }\r\n                 console.log('this.moreData getMoreData', this.moreData);\r\n\r\n            },\r\n            (err) => {\r\n                console.warn(err);\r\n                this.netErr = true;\r\n            },\r\n           \r\n            )\r\n    }\r\n\r\n    getNotifications(event?: any) {\r\n        this.initStart = 0;\r\n        /*if (!event)\r\n          this.showLoader = true;*/\r\n        console.log('this.moreData', this.moreData);\r\n        this.notificationProvider.getNotifications(this.userLocal.id, this.initLimit, this.initStart).subscribe(\r\n            ({status, data}) => {\r\n                if (status == 'success') {\r\n                    event && event.complete();\r\n                    this.AllNotifications = data;\r\n                    if (this.AllNotifications.lenght == this.initLimit) {\r\n                        this.moreData = true;\r\n                    } else {\r\n                        this.moreData = false;\r\n                    }\r\n                    console.log('All notifications', this.AllNotifications);\r\n                } else {\r\n\r\n                    this.noData = true;\r\n\r\n                }\r\n            },\r\n            (err) => {\r\n                this.showLoader = false;\r\n                console.warn(err);\r\n                this.netErr = true;\r\n                event && event.complete();\r\n            },\r\n            () => {\r\n                [this.moreData, this.showLoader] = [true, false];\r\n                event && event.complete();\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    navigateToPage(pageData: INotification | string): void {\r\n\r\n\r\n        if (typeof pageData == 'string') {\r\n            this.navCtrl.push(pageData);\r\n        } else if (pageData.type == 'deliveryRequest') {\r\n            this.navCtrl.push('NotificationDeleveryReqPage', {pageData})\r\n        } else if (pageData.type == 'addComment') {\r\n            this.navCtrl.push('CommentNotificationPage', {pageData})\r\n        } else if (pageData.type == 'like') {\r\n            this.navCtrl.push('CommentNotificationPage', {pageData})\r\n        } else if (pageData.type == 'salesBill') {\r\n            this.navCtrl.push('SalesnotificationPage', {pageData})\r\n        } else if (pageData.type == 'duesRequest') {\r\n            this.navCtrl.push('NotificationDuePage', {pageData})\r\n        } else if (pageData.type == 'ownerDues') {\r\n            this.navCtrl.push('OwnerduerequestPage', {pageData})\r\n        } else {\r\n            this.navCtrl.push('ReserveShelfPage', {pageData})\r\n        }\r\n\r\n\r\n    }\r\n\r\n    limitNOtification(notificationMsg: string): string {\r\n        return (notificationMsg.length > 44) ? notificationMsg.substr(0, 44) : notificationMsg\r\n    }\r\n\r\n    isRead(status) {\r\n        return (status == 0) ? 'highlight' : '';\r\n    }\r\n\r\n    imagePath(img) {\r\n        return 'http://rfapp.net/templates/default/uploads/avatars/' + img\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notifications/notificationsPage.ts"],"sourceRoot":""}