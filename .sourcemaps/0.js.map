{"version":3,"sources":["../../src/pages/notificationspages/ownerduerequest/ownerduerequest.module.ts","../../src/pages/notificationspages/ownerduerequest/ownerduerequest.ts","../../src/app/service/InewUserData.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { SinceDatePipeModule } from './../../../app/service/since-date/since-date.module';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OwnerduerequestPage } from './ownerduerequest';\n\n@NgModule({\n  declarations: [\n    OwnerduerequestPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OwnerduerequestPage),\n    SinceDatePipeModule\n  ],\n})\nexport class OwnerduerequestPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notificationspages/ownerduerequest/ownerduerequest.module.ts","import { NotificationsProvider } from './../../../providers/notifications';\nimport { INotification } from './../../../app/service/interfaces';\nimport { DuesProvider } from './../../../providers/dues';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { IlevelId } from '../../../app/service/InewUserData';\n\n/**\n * Generated class for the OwnerduerequestPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-ownerduerequest',\n  templateUrl: 'ownerduerequest.html',\n})\nexport class OwnerduerequestPage {\n  userLevel: number = JSON.parse(localStorage.getItem('userLocalData')).level_id;\n  pageData: INotification;\n  dueDetails: any;\n  isStrore: boolean = false;\n  showRefuseMsg: boolean = false;\n  refuseMsg: string = \"\";\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public duesProvider: DuesProvider,\n    public toastCtrl: ToastController,\n    public notificationProvider: NotificationsProvider\n  ) {\n    \n    \n    this.pageData = this.navParams.get('pageData');\n\n    console.log('pageDate from notification page', this.pageData);\n  }\n\n  ionViewWillEnter() {\n    if (!this.userLevel)\n      this.userLevel = JSON.parse(localStorage.getItem('userLocalData')).level_id;\n    \n    \n    this.isStrore = this.userLevel == IlevelId.store;\n    console.log('user level Id' , this.userLevel, (this.userLevel == IlevelId.store)?'store':'transporter');\n  }\n\n\n  ionViewDidLoad() {\n    \n    this.getDueDetails()\n    \n    this.updateNotificationStatus();\n    \n  }\n\n  private getDueDetails() {\n    const due = { user_id: this.pageData.user_id, url: this.pageData.url }\n    this.duesProvider\n      .getOwnerDuesById(due)\n      .subscribe(({ data, status, errors }) => {\n        console.log(data, status, errors);\n        this.dueDetails = data;\n      });\n  }\n\n  private updateNotificationStatus() {\n    if (this.pageData.status == 0) {\n      this.notificationProvider.updatereadNotify(this.pageData.id, this.pageData.user_id)\n        .subscribe(res => {\n          console.log(res);\n        })\n\n    } else {\n      console.info('you have been read this notification')\n    }\n  }\n\n  sendReplyRequest(accept: boolean = true, msg?:string) {\n    \n    let due:any = {\n      'receive_user_id': this.pageData.send_user_id,\n      'user_id': this.pageData.user_id,\n      'url': this.pageData.url\n    };\n\n    if (!accept) due.due_message = msg \n\n    let sendRequest = accept ? this.duesProvider.acceptRequest(due, true) : this.duesProvider.refuseRequest(due, true);\n\n\n    sendRequest.subscribe(({ status }) => {\n      let acceptStatus = (accept) ? 'الموافقة' : 'الرفض';\n      if (status == 'success') {\n        this.showToast(`لقد تم ارسال  ${acceptStatus} الى الادارة`);\n        this.navCtrl.pop();\n      }\n    }, err => {\n      console.warn(err);\n      this.showToast('التطبيق يتطلب اتصال بالانترنت');\n    })\n\n\n\n  }\n\n  sendRefuseMsg() {\n    if (this.showRefuseMsg) {\n      \n      console.log('you are about to send refuse message to the admin');\n\n      if (this.refuseMsg && this.refuseMsg.trim()) {\n        this.sendReplyRequest(false,this.refuseMsg)\n      } else {\n        this.showToast('يرجى ادخال سبب الرفض اولاً');\n        this.refuseMsg = '';\n      }\n\n    } else {\n\n      this.showRefuseMsg = true;\n    }\n  }\n\n  imagePath(img) {\n    return 'http://rfapp.net/templates/default/uploads/avatars/' + img\n  }\n\n  showToast(msg) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'top'\n    });\n    toast.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notificationspages/ownerduerequest/ownerduerequest.ts","export enum IlevelId {\r\n  store = 2,\r\n  exporter,\r\n  client\r\n}\r\nexport enum levelToAr {\r\n  'متجر'= 2,\r\n  'مورد',\r\n  'عميل'\r\n}\r\n\r\nexport interface ImodalData {\r\n  areaId?: number,\r\n  areaName?: string,\r\n  cityId?: number,\r\n  cityName?:string,\r\n  distId?: number,\r\n  distName?: string\r\n}\r\nexport interface Iplace {\r\n  id: number,\r\n  name: string,\r\n  parent: number,\r\n  parent_name: string| null\r\n}\r\nexport interface IuserData{\r\n  apiKey: string,\r\n  Name: string,\r\n  Username: string,\r\n  Email:string,\r\n  Mobile: string,\r\n  Gender: string,\r\n  Address:string,\r\n  Map: string,\r\n  Area: number,\r\n  City: number,\r\n  Dist: number,\r\n  level_id: number,\r\n  commercialRegisterId?: number,\r\n  directorProductName?: string\r\n}\r\n\r\nexport interface IlocalUser{\r\n  username: string,\r\n  name: string,\r\n  id: number,\r\n  level_id: number,\r\n  active: number,\r\n  address: string,\r\n  area: number,\r\n  areaName?: string,\r\n  city: number,\r\n  cityName?: string,\r\n  dist: number,\r\n  distName?: string,\r\n  email: string,\r\n  gender: string,\r\n  mobile: string,\r\n  avatar: string,\r\n  latitude: string,\r\n  longitude: string,\r\n  cover?: string,\r\n  owner_name?: string,\r\n  cr_num?: number,\r\n  map: string,\r\n  followers?: number,\r\n  followings?: number,\r\n  follow?: boolean | any,\r\n  device_token_id?:string\r\n}\r\n\r\nexport interface Ishelf {\r\n  area: number,\r\n  close: number,\r\n  cost: number,\r\n  id: number,\r\n  name: string,\r\n  user_id: number,\r\n  data_added?: Date,\r\n  data_modified?: Date,\r\n  shelf_status?: number,\r\n  start_date?: any,\r\n  end_date?: any,\r\n  shelf_name?: string,\r\n  matger_id?:number,\r\n  matger_name?:string\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/service/InewUserData.ts"],"sourceRoot":""}