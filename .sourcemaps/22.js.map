{"version":3,"sources":["../../src/pages/notificationspages/notification-due/notification-due.module.ts","../../src/pages/notificationspages/notification-due/notification-due.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { SinceDatePipeModule } from './../../../app/service/since-date/since-date.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { NotificationDuePage } from './notification-due';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NotificationDuePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(NotificationDuePage),\r\n    SinceDatePipeModule\r\n  ],\r\n})\r\nexport class NotificationDuePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notificationspages/notification-due/notification-due.module.ts","import { DueDetails,EDueStatus } from './../../../app/service/interfaces';\r\nimport { DuesProvider } from './../../../providers/dues';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\r\nimport {NotificationsProvider} from \"../../../providers/notifications\";\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-notification-due',\r\n  templateUrl: 'notification-due.html',\r\n})\r\nexport class NotificationDuePage {\r\n  pageData: any;\r\n  dueMsg:string = '';\r\n  showMsg: boolean = false;\r\n  DueDetails: DueDetails;\r\n  netErr: boolean = false;\r\n  constructor(public navCtrl: NavController,\r\n     public navParams: NavParams,\r\n     private dueProvider: DuesProvider,\r\n     public toastCtrl:ToastController,\r\n              private notificationsProviders: NotificationsProvider\r\n    ) {\r\n\r\n    this.pageData = this.navParams.get('pageData')\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    \r\n    let {url, user_id, id} = this.pageData;\r\n    \r\n    console.log(this.pageData);\r\n\r\n    (this.pageData.status == 0)?this.updateRead(id, user_id):console.info('you have been read this notification')\r\n    \r\n\r\n    this.dueProvider\r\n      .getDueById({url, user_id})\r\n      .retry(3)\r\n      .subscribe(({status, data})=>{\r\n        if (status === 'success') {\r\n          this.DueDetails = data;\r\n          \r\n          console.log('Due Details',this.DueDetails);\r\n        } else {\r\n          \r\n        }\r\n      },\r\n      err=>{\r\n        console.warn(err);\r\n        this.netErr = true;\r\n      })\r\n  }\r\n\r\n  updateRead(id, user_id) {\r\n    this.notificationsProviders\r\n    .updatereadNotify(id, user_id)\r\n    .subscribe(res => { // in developing only\r\n      console.log(res);\r\n    })\r\n  }\r\n\r\n  acceptRequest() {\r\n\r\n    let duedata = {\r\n      user_id: this.pageData.user_id,\r\n      recieve_user_id: this.pageData.send_user_id,\r\n      url: this.pageData.url\r\n    }\r\n\r\n    this.dueProvider\r\n      .acceptRequest(duedata)\r\n      .debounceTime(1500)\r\n      .subscribe(({status})=>{\r\n        if (status === 'success') {\r\n          this.showToast('تم ارسال ردك بنجاح');\r\n          setTimeout(()=>{\r\n            this.navCtrl.pop();\r\n          }, 1500);\r\n        } else {\r\n          this.showToast('الرجاء المحاولة مرة اخرى')\r\n        }\r\n      })\r\n  }\r\n  refuseRequest() {\r\n      this.showMsg = true;\r\n       if (this.dueMsg && this.dueMsg.trim() != '') {\r\n        let duedata = {\r\n          user_id: this.pageData.user_id,\r\n          recieve_user_id: this.pageData.send_user_id,\r\n          url: this.pageData.url,\r\n          due_message: this.dueMsg.replace(/\\n/g,'<br><br>')\r\n        }\r\n\r\n        this.dueProvider\r\n          .refuseRequest(duedata)\r\n          .debounceTime(1500)\r\n          .subscribe(({status})=>{\r\n            if (status === 'success') {\r\n              this.showToast('تم ارسال ردك بنجاح');\r\n              setTimeout(()=>{\r\n                this.navCtrl.pop();\r\n              }, 1500);\r\n            } else {\r\n              this.showToast('الرجاء المحاولة مرة اخرى')\r\n            }\r\n          })\r\n       } else {\r\n         this.showToast('يرجى ادخال رسالة الرفض')\r\n       }\r\n      }\r\n\r\n\r\n      showToast(msg) {\r\n        let toast = this.toastCtrl.create({\r\n          message: msg,\r\n          duration: 2000,\r\n          position:'top'\r\n        });\r\n        toast.present();\r\n      }\r\n\r\n  imagePath(img) {\r\n    return 'http://rfapp.net/templates/default/uploads/avatars/'+img\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notificationspages/notification-due/notification-due.ts"],"sourceRoot":""}