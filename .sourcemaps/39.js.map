{"version":3,"sources":["../../src/pages/deliverproducts/deliverproducts.module.ts","../../src/pages/deliverproducts/deliverproducts.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DeliverproductsPage } from './deliverproducts';\r\nimport { HsaloaderComponentModule } from '../../components/hsa-loader/hsa-loader.module';\r\n@NgModule({\r\n  declarations: [\r\n    DeliverproductsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DeliverproductsPage),\r\n    HsaloaderComponentModule\r\n  ],\r\n  exports: [\r\n    DeliverproductsPage\r\n  ]\r\n})\r\nexport class DeliverproductsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/deliverproducts/deliverproducts.module.ts","import { DeliveryRequestInfo } from '../deliveryrequestmodal';\r\n\r\nimport { Component} from '@angular/core';\r\nimport { NavController, NavParams,ModalController, IonicPage, ToastController, Events } from 'ionic-angular';\r\nimport {  IlocalUser } from '../../app/service/interfaces';\r\nimport { DeliveryProvider } from '../../providers/delivery';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-deliverproducts',\r\n  templateUrl: 'deliverproducts.html',\r\n})\r\nexport class DeliverproductsPage {\r\n  InitData: any;\r\n  AllRequests: any[];\r\n  userLocal: IlocalUser = JSON.parse(localStorage.getItem('userLocalData'));\r\n  showLoader: boolean = true;\r\n  noRequests: boolean = false;\r\n  netErr: boolean = false;\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private deliveryProvider: DeliveryProvider,\r\n    public toastCtrl: ToastController,\r\n    public modal: ModalController,\r\n    public events: Events\r\n  ) {\r\n    //TODO: get details of request to edit delivery request\r\n    this.InitData = this.navParams.get('pageData');\r\n    console.log('initData', this.InitData);\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.userLocal = JSON.parse(localStorage.getItem('userLocalData'));\r\n  }\r\n  ionViewDidLoad() {\r\n    if (!this.userLocal) {\r\n      this.userLocal = JSON.parse(localStorage.getItem('userLocalData'));\r\n\r\n    } else {\r\n      this.getDeliveryRequests(this.userLocal.id);\r\n    }\r\n\r\n\r\n\r\n  }\r\n  showInfo(request, user_id) {\r\n    let modal = this.modal.create(DeliveryRequestInfo, { pageData: request, user_id });\r\n\r\n    modal.present();\r\n\r\n  }\r\n  refresh(event) {\r\n    console.log('refresh page', event);\r\n    this.getDeliveryRequests(this.userLocal.id, event);\r\n\r\n  }\r\n  getDeliveryRequests(user_id, event?:any) {\r\n    this.deliveryProvider.getDeliveryRequests({ user_id })\r\n      .subscribe(({ status, data, errors}) => {\r\n        if (status == 'success') {\r\n          console.log('All Delivery Requests', data )\r\n          this.AllRequests = data.reverse()\r\n        } else {\r\n          this.noRequests = true;\r\n          event && event.complete();\r\n          console.warn(errors);\r\n        }\r\n      },\r\n      err => {\r\n        console.warn(err);\r\n\r\n        [this.netErr, this.showLoader] = [true, false];\r\n        //event && event.complete();\r\n      },\r\n      () => {\r\n        event && event.complete();\r\n        this.showLoader = false;\r\n      })\r\n  }\r\n\r\n  limitString(str: string) {\r\n    return (str.length > 55) ? str.slice(0, 50) + '.....' : str;\r\n  }\r\n   // callback...\r\n /* myCallbackFunction = function(_params) {\r\n    return new Promise((resolve, reject) => {\r\n          console.log('_params',_params);\r\n          console.log('AllRequests',this.AllRequests);\r\n          //let index = this.AllRequests.findIndex(e => e.id === _params['id']);\r\n          //let lastEdit = this.AllRequests[index];\r\n          //this.AllRequests.splice(index,1);\r\n          this.AllRequests.unshift(_params);\r\n          resolve();\r\n      });\r\n  } */\r\n  navigateToPage(page, requestData ='') {\r\n    this.events.subscribe('deliveryRequestEvent', (_paramsVar) => {\r\n        // Do stuff with \"_paramsVar\"\r\n        console.log('AllRequests',this.AllRequests);\r\n        this.AllRequests    = (this.AllRequests instanceof Array) ? this.AllRequests : [];\r\n        this.AllRequests.unshift(_paramsVar);\r\n        this.events.unsubscribe('deliveryRequestEvent'); // unsubscribe this event\r\n    })\r\n    this.navCtrl.push(page,{ requestData });\r\n     // push page...\r\n     /* this.navCtrl.push(page, {\r\n      callback: this.myCallbackFunction,\r\n      requestData:requestData,\r\n    }); */\r\n  }\r\n\r\n  showToast(msg) {\r\n    let toast = this.toastCtrl.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      position: 'top'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  // editDeliveryProduct(event){\r\n  //   console.log('my event ', event)\r\n  // }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/deliverproducts/deliverproducts.ts"],"sourceRoot":""}