{"version":3,"sources":["../../src/pages/places/places.module.ts","../../src/pages/places/places.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { placesPage } from './places';\r\nimport { HsaloaderComponentModule } from '../../components/hsa-loader/hsa-loader.module';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    placesPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(placesPage),\r\n    HsaloaderComponentModule\r\n  ],\r\n  exports: [\r\n    placesPage\r\n  ]\r\n})\r\nexport class placesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/places/places.module.ts","import { Component, Inject } from '@angular/core';\r\nimport { IonicPage, ViewController, NavController, NavParams, ModalController, Platform, Events } from 'ionic-angular';\r\nimport { UserProvider } from \"../../providers/user\";\r\nimport { AreaProvider } from '../../providers/area';\r\n//import {PlacesModal} from '../filtermodal';\r\nimport { ImodalData, Iplace } from \"../../app/service/InewUserData\";\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-places',\r\n    templateUrl: 'places.html',\r\n})\r\nexport class placesPage {\r\n    userLocal = JSON.parse(localStorage.getItem('userLocalData'));\r\n    locationError: any = null;\r\n    dataFromModal: ImodalData | any;\r\n    places: [Iplace] | any = [];\r\n    errorAccessDB: boolean = false;\r\n    initLimit: number = 10;\r\n    initStart: number = 0;\r\n    showLoader: boolean = true;\r\n    allStores: any[] = [];\r\n    moreData: boolean = true;\r\n    noPlaces: boolean = false;\r\n    noFilter: boolean = false;\r\n    netError: boolean = false;\r\n    parent: number = 0;\r\n    type: number = 0;\r\n    //ahmed ouda\r\n    searchVal: string = '';\r\n    dist: number = 0;\r\n    showSearchBar: boolean = false;\r\n    // noStores: boolean = false;\r\n    // noFilter: boolean = false;\r\n    //searchToggle: boolean = false;\r\n\r\n    constructor(\r\n        @Inject('API_URL') private API_URL,\r\n        @Inject('UPLOAD_PATH') private UPLOAD_PATH,\r\n        public navCtrl: NavController,\r\n        public navParams: NavParams,\r\n        public modalCrtl: ModalController,\r\n        private userProvider: UserProvider,\r\n        public platform: Platform,\r\n        public viewCtrl: ViewController,\r\n        public areasProviders: AreaProvider, private events: Events\r\n    ) {\r\n        this.type = this.navParams.get('type');\r\n        this.parent = this.navParams.get('parent');\r\n        console.log('this.type= ', this.type, this.parent);\r\n    }\r\n\r\n\r\n    ionViewDidLoad() {\r\n\r\n        if (!this.userLocal)\r\n            this.userLocal = JSON.parse(localStorage.getItem('userLocalData'));\r\n\r\n        this.platform.registerBackButtonAction(() => {\r\n            this.navCtrl.pop()\r\n        });\r\n\r\n        console.log(this.userLocal);\r\n        this.getPlacesByParent();\r\n    }\r\n\r\n    navigateToPlacesPage(page, type, Parent) {\r\n        console.log('navigateToPlacesPage = ', page, type, Parent);\r\n        this.navCtrl.push(page, { 'type': type, 'parent': Parent }) // [id of the user i will enter his profile page, id of the user who is on the app]\r\n    }\r\n    navigateTo(type, parent) {\r\n        const page = (type === 'stores') ? 'StoresPage' : 'Exporter';\r\n\r\n        console.log('page = ', page, 'type=', type, 'parent=', parent);\r\n        this.navCtrl\r\n            .push(page, { 'places_id': parent })\r\n            .then(() => {\r\n                const index = this.viewCtrl.index;\r\n                console.log('index = ', index);\r\n                for (let i = index; i > 0; i--) {\r\n                    this.navCtrl.remove(i);\r\n                }\r\n\r\n            });\r\n    }\r\n\r\n    getPlacesByParent(): void {\r\n\r\n        this.areasProviders.filterPlacesByParent(this.parent)\r\n            .subscribe(({ data }) => {\r\n                [this.showLoader, this.errorAccessDB] = [true, false];\r\n                this.places = data;\r\n                console.log('this.places = ', this.places);\r\n            },\r\n            err => {\r\n\r\n                [this.showLoader, this.errorAccessDB] = [false, true];\r\n                console.warn(err);\r\n                // callback('err', true);\r\n            },\r\n            () => {\r\n                this.showLoader = false;\r\n                // callback('completed', true);\r\n            }\r\n            )\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    filterItems(event, target = this.places) {\r\n\r\n        let value = event.target.value;\r\n\r\n        [this.noPlaces, this.moreData, this.noFilter] = [false, true, false];\r\n\r\n        if (value && value.trim() != '') {\r\n\r\n            let filtered = this.places.filter(item => {\r\n                return item.name.includes(value)\r\n            });\r\n            if (filtered.length > 0) {\r\n                this.places = filtered;\r\n            } else {\r\n                this.places = [];\r\n                this.noFilter = true;\r\n            }\r\n\r\n        } else {\r\n\r\n            this.getPlacesByParent();\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onCancel(event) {\r\n        event.target.value = \"\";\r\n        this.filterItems(event);\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/places/places.ts"],"sourceRoot":""}