{"version":3,"sources":["../../src/pages/add/addshelf/addshelf.module.ts","../../src/pages/add/addshelf/addshelf.ts"],"names":[],"mappings":"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","file":"41.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AddshelfPage } from './addshelf';\r\nimport { HsaloaderComponentModule } from '../../../components/hsa-loader/hsa-loader.module';\r\n@NgModule({\r\n  declarations: [\r\n    AddshelfPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AddshelfPage),\r\n    HsaloaderComponentModule\r\n  ],\r\n  exports: [\r\n    AddshelfPage\r\n  ]\r\n})\r\nexport class AddshelfPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add/addshelf/addshelf.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\r\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\r\n\r\nimport { ShelfsProvider } from '../../../providers/shelfs';\r\nimport { IlocalUser, ArShelfForm } from '../../../app/service/interfaces';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-addshelf',\r\n  templateUrl: 'addshelf.html',\r\n  })\r\n\r\nexport class AddshelfPage {\r\n  userLocal: IlocalUser = JSON.parse(localStorage.getItem('userLocalData'));\r\n  addShelfForm: FormGroup;\r\n  InitData;\r\n  actionText: string = 'اضافة رف';\r\n  formAction: string = 'add';\r\n  showLoader: boolean = false;\r\n  addLoader: boolean = false;\r\n  isDisabled: boolean = false;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public shelfsProvider: ShelfsProvider,\r\n    public toastCtrl: ToastController\r\n  ) {\r\n\r\n    this.addShelfForm = new FormBuilder().group({\r\n      //name: new FormControl('',[Validators.pattern('[0-9A-z]+'), Validators.required]),\r\n      name: new FormControl('',[Validators.required]),      \r\n      area: new FormControl('',[Validators.pattern('([1-9]+(\\.[0-9]+)?)|(0{1,2}(\\.[0-9]+)+)'),Validators.required]),\r\n      cost: new FormControl('',[Validators.pattern('([1-9]+(\\.[0-9]+)?)|(0{1,2}(\\.[0-9]+)+)'), Validators.required]),\r\n      fridge: new FormControl(0,[Validators.required])\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.addShelfForm.valueChanges.subscribe(data => {\r\n      console.log(data);\r\n    });\r\n\r\n    this.InitData = this.navParams.get('pageData');\r\n\r\n    console.log('shelf data', this.InitData, typeof this.InitData);\r\n\r\n    if (typeof this.InitData == 'object') {\r\n      this.actionText = 'تعديل الرف';\r\n      this.addShelfForm.controls.name.setValue(this.InitData.name);\r\n\r\n      this.addShelfForm.controls.area.setValue(this.InitData.area);\r\n\r\n      this.addShelfForm.controls.cost.setValue(this.InitData.cost);\r\n\r\n      this.addShelfForm.controls.fridge.setValue((this.InitData.fridge == '1')? true :false);\r\n\r\n      this.formAction = 'edit';\r\n    }\r\n\r\n\r\n  }\r\n\r\n  submitForm() {\r\n\r\n    if (this.addShelfForm.valid) {\r\n      this.addShelfForm.get('fridge').setValue(this.addShelfForm.get('fridge').value ? 1 : 0);\r\n      this.showLoader = true;\r\n      let shelfForm = Object.assign({}, this.addShelfForm.value, {\r\n        \"user_id\": this.userLocal.id\r\n      });\r\n\r\n      console.log(shelfForm);\r\n\r\n      if (this.formAction == 'add') {\r\n        setTimeout(() => {\r\n          this.isDisabled = false; // enable button after 5 second\r\n        }, 5000);\r\n        this.addLoader = true; // show loade icon on button\r\n        this.isDisabled = true; // to disable send button for 5 second\r\n        this.shelfsProvider.addShelf(shelfForm)\r\n          .subscribe(\r\n            ({status, errors}) => {\r\n  \r\n            if (status == 'success') {\r\n              this.isDisabled = false;\r\n              this.showToast('تم اضافة الرف بنجاح');\r\n  \r\n              this.navCtrl.pop();\r\n            } else {\r\n  \r\n              let errorsKeys = Object.keys(errors);\r\n              let msg = errors[errorsKeys[0]][0];\r\n              this.showToast(msg);\r\n            }\r\n  \r\n          },\r\n          err => {\r\n            console.warn(err);\r\n            this.showToast('تفقد الاتصال وحاول مجددا');\r\n            this.showLoader = false\r\n          }, () => {\r\n            this.showLoader = false;\r\n            this.addLoader = false;\r\n          }\r\n          );\r\n\r\n      } else {\r\n\r\n        if (this.addShelfForm.dirty) {\r\n          setTimeout(() => {\r\n            this.isDisabled = false; // enable button after 5 second\r\n          }, 5000);\r\n          this.addLoader = true; // show loade icon on button\r\n          this.isDisabled = true; // to disable send button for 5 second\r\n          shelfForm['id'] = this.InitData.id;\r\n          this.shelfsProvider.editShelf(shelfForm).subscribe(\r\n            res => {\r\n              console.log(res);\r\n\r\n\r\n              if (res.status == 'success') {\r\n                this.addLoader = false;\r\n                this.isDisabled = false;\r\n                this.navCtrl.pop();\r\n              } else {\r\n\r\n                let errorsKeys = Object.keys(res.errors);\r\n                let msg = res.errors[errorsKeys[0]][0];\r\n                this.showToast(msg);\r\n                this.addLoader = false;\r\n              }\r\n            },\r\n            err => {\r\n              console.warn(err);\r\n              this.showToast(`تفقد الاتصال وحاول مجددا`);\r\n              this.showLoader = false\r\n              this.addLoader = false;\r\n            }\r\n          )\r\n        } else {\r\n\r\n          console.log('no data has been changed');\r\n          this.navCtrl.pop();\r\n        }\r\n\r\n\r\n    }\r\n    } else {\r\n      this.detectUnvalidFormErrors();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  detectUnvalidFormErrors(form:FormGroup = this.addShelfForm, formKeys: string[] = Object.keys(form.value) ) {\r\n\r\n\r\n    formKeys.every((value)=> {\r\n\r\n      if(form.get(value).getError('required')) {\r\n\r\n        this.showToast(`يرجى ادخال ${ArShelfForm[value]}`);\r\n\r\n        return false;\r\n\r\n      } else if(form.get(value).getError('minlength')) {\r\n\r\n        this.showToast(`${ArShelfForm[value]} يجب ان يكون ${form.get(value).getError('minlength').requiredLength} حروف على الاقل`);\r\n\r\n        return false;\r\n      } else if (form.get(value).getError('pattern')){\r\n        if(value == 'name') {\r\n          this.showToast(`يرجى ادخال قيمة صحيحة لـ ${ ArShelfForm[value]}`);\r\n        } else if(value == 'area'){\r\n          this.showToast(ArShelfForm[value]+ ' يجب ان تتكون من ارقام انجليزية')\r\n        }\r\n        else {\r\n          this.showToast(ArShelfForm[value]+ ' يجب ان يتكون من ارقام انجليزية')\r\n        }\r\n        return false;\r\n      } else {\r\n\r\n        return true;\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  showToast(msg) {\r\n    let toast = this.toastCtrl.create({\r\n      message: msg,\r\n      duration: 3000,\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add/addshelf/addshelf.ts"],"sourceRoot":""}