{"version":3,"sources":["../../src/pages/settings/sales/sales.module.ts","../../src/pages/settings/sales/sales.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SalesPage } from './sales';\r\nimport {ArabicDatePipeModule} from \"../../../app/service/arabic-date/arabic-date.module\";\r\nimport {HsaloaderComponentModule} from \"../../../components/hsa-loader/hsa-loader.module\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SalesPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SalesPage),\r\n    ArabicDatePipeModule,\r\n    HsaloaderComponentModule\r\n  ],\r\n  exports: [\r\n    SalesPage\r\n  ]\r\n})\r\nexport class SalesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/settings/sales/sales.module.ts","import { Component } from '@angular/core';\r\nimport {IonicPage, ModalController, NavController, NavParams} from 'ionic-angular';\r\nimport {SalesProvider} from \"../../../providers/sales\";\r\nimport {IlocalUser, IsalesBill} from \"../../../app/service/interfaces\";\r\nimport {ViewBillModal} from \"../../viewbill\";\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-sales',\r\n  templateUrl: 'sales.html',\r\n})\r\nexport class SalesPage {\r\n  userLocal : IlocalUser = JSON.parse(localStorage.getItem('userLocalData'));\r\n  showLoader: boolean = true;\r\n  moreData: boolean = true;\r\n  netErr: boolean = false;\r\n  noData: boolean = false;\r\n  initLimit: number = 10;\r\n  initStart: number = 0;\r\n  AllBills: IsalesBill[] =[];\r\n  SalaesProducts: any[];\r\n  constructor(public navCtrl: NavController,\r\n              public navParams: NavParams,\r\n              public salesProvider: SalesProvider,\r\n              public modalCtrl: ModalController) {\r\n  }\r\n  ionViewWillEnter(): void {\r\n    this.userLocal = JSON.parse(localStorage.getItem('userLocalData'));\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad SalesPage');\r\n\r\n    this.ionViewWillEnter();\r\n\r\n    if (this.userLocal.level_id == 2) {\r\n\r\n      this.getSalesBill(this.userLocal.id);\r\n\r\n    } else {\r\n\r\n      this.getSalesProducts(this.userLocal.id);\r\n\r\n    }\r\n    /*if (this.userLocal && this.userLocal.level_id == 2) {\r\n      this.getSalesBill(this.userLocal.id);\r\n    } else {\r\n\r\n    }*/\r\n  }\r\n\r\n  getSalesBill(user_id:number, event?:any) {\r\n\r\n    this.salesProvider.getSalesBillByUser(user_id, this.initLimit)\r\n      .subscribe(({status, errors, data})=> {\r\n          if  (status == 'success') {\r\n\r\n                this.AllBills =data;\r\n\r\n\r\n          } else {\r\n            console.warn(errors);\r\n            this.noData = true;\r\n\r\n            event&&event.complete();\r\n\r\n          }\r\n      },err => {\r\n          event&&event.complete();\r\n      console.warn(err);\r\n      this.netErr = true;\r\n\r\n\r\n          this.showLoader = false;\r\n    },\r\n    () => {\r\n      event&&event.complete();\r\n      this.showLoader = false;\r\n    })\r\n\r\n  }\r\n\r\n  getMoreData(event) {\r\n\r\n\r\n    if (this.moreData) {\r\n      this.initStart += this.initLimit;\r\n      if (this.userLocal.level_id == 2) {\r\n        this.salesProvider.getSalesBillByUser(this.userLocal.id, this.initLimit, this.initStart)\r\n          .subscribe(\r\n            ({status, data}) => {\r\n              if  (status == 'success') {\r\n\r\n                  this.AllBills = [...this.AllBills, ...data];\r\n\r\n                if (data.length < this.initLimit)\r\n                  this.moreData = false;\r\n\r\n              } else {\r\n\r\n                event.complete();\r\n                this.moreData = false;\r\n\r\n              }\r\n            },\r\n            (err) => {\r\n              console.warn(err);\r\n              this.netErr = true;\r\n              this.showLoader = false;\r\n            },\r\n            () => {\r\n              this.showLoader = false;\r\n            }\r\n          )\r\n      } else {\r\n        this.initStart += this.initLimit;\r\n        this.salesProvider.getSalesProducts(this.userLocal.id, this.initLimit, this.initStart)\r\n          .subscribe(\r\n            ({status, data}) => {\r\n              if  (status == 'success') {\r\n\r\n                this.SalaesProducts = [...this.SalaesProducts, ...data];\r\n                console.log('data return detrmin sales of supllier items', data)\r\n\r\n                if (data.length < this.initLimit)\r\n                  this.moreData = false;\r\n\r\n              } else {\r\n\r\n                event.complete();\r\n                this.moreData = false;\r\n\r\n              }\r\n            },\r\n            (err) => {\r\n              console.warn(err);\r\n              this.netErr = true;\r\n              this.showLoader = false;\r\n            },\r\n            () => {\r\n              this.showLoader = false;\r\n            }\r\n          )\r\n      }\r\n    } else {\r\n      event.complete();\r\n      return false;\r\n    }\r\n  }\r\n\r\n  refreshData(event) {\r\n    if (this.userLocal.level_id == 2) {\r\n\r\n      this.getSalesBill(this.userLocal.id, event);\r\n\r\n    } else {\r\n\r\n      this.getSalesProducts(this.userLocal.id,event);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  private fixed(price:string):number {\r\n    return parseInt(price);\r\n  }\r\n\r\n  openBill(bill: IsalesBill) {\r\n    console.log(bill.id);\r\n\r\n    let modal = this.modalCtrl.create(ViewBillModal, {pageData: bill});\r\n\r\n    modal.present();\r\n  }\r\n\r\n  getSalesProducts(user_id, event?:any) {\r\n    this.salesProvider.getSalesProducts(user_id, this.initLimit)\r\n      .subscribe(({status, errors, data})=> {\r\n          if  (status == 'success') {\r\n              console.log('data return detrmin sales of supllier items', data)\r\n              this.SalaesProducts = data\r\n\r\n\r\n          } else {\r\n            console.warn(errors);\r\n              this.noData = true;\r\n            event&&event.complete();\r\n\r\n          }\r\n        },err => {\r\n          event&&event.complete();\r\n          console.warn(err);\r\n          this.netErr = true;\r\n          this.showLoader = false;\r\n        },\r\n        () => {\r\n          event&&event.complete();\r\n          this.showLoader = false;\r\n        })\r\n  }\r\n\r\n  imagePath(img) {\r\n    return 'http://rfapp.net/templates/default/uploads/items/'+img\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/settings/sales/sales.ts"],"sourceRoot":""}