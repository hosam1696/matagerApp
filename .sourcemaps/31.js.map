{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\r\n\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { HomePage } from './home';\r\n\r\n//import { HsaloaderComponentModule } from '../../components/hsa-loader/hsa-loader.module';\r\n//import {wordColorDirective} from \"../../app/service/wordcolor.directive\";\r\n\r\n@NgModule({\r\n    declarations: [\r\n        HomePage\r\n    ],\r\n    exports: [\r\n        HomePage\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(HomePage)\r\n    ]\r\n\r\n})\r\n\r\nexport class HomePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { ISlider } from './../../app/service/interfaces';\r\nimport { PushProvider } from './../../providers/push';\r\nimport { Http } from '@angular/http';\r\nimport {\r\n  MapsModal\r\n} from './../mapsmodal';\r\nimport {\r\n  Component\r\n} from '@angular/core';\r\nimport {\r\n  NavController,\r\n  ToastController,\r\n  IonicPage,\r\n  Config,\r\n  ModalController,\r\n  Platform\r\n} from 'ionic-angular';\r\nimport {\r\n  Push,\r\n  PushObject,\r\n  PushOptions\r\n} from '@ionic-native/push';\r\nimport {\r\n  Geolocation\r\n} from '@ionic-native/geolocation';\r\nimport {\r\n  Network\r\n} from '@ionic-native/network';\r\nimport {\r\n  IlocalUser\r\n} from \"../../app/service/InewUserData\";\r\nimport {\r\n  UserProvider\r\n} from \"../../providers/user\";\r\n//import {cordova} from \"../profile/profile\";\r\n\r\ndeclare let cordova: any;\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n  Sliders:ISlider[];\r\n  userLocalData: IlocalUser = JSON.parse(localStorage.getItem('userLocalData'));\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public geolocation: Geolocation,\r\n    public network: Network,\r\n    public toastCont: ToastController,\r\n    public push: Push,\r\n    public config: Config,\r\n    public modalCrtl: ModalController,\r\n    public platform: Platform,\r\n    public pushProvider: PushProvider\r\n  ) {\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    let userId: number = 0;\r\n    if (this.userLocalData && this.userLocalData.id) {\r\n      userId = this.userLocalData.id;\r\n    }\r\n    this.pushProvider\r\n      .getHeaderSlider(userId)\r\n      .subscribe(({ data, status}) => {\r\n        if (status === 'success') {\r\n          this.Sliders = data;\r\n        }\r\n      })\r\n\r\n    console.log('Config Object', this.config.get('caches'), this.config.get('iconMode'));\r\n\r\n\r\n    /* Get the current location if user activates the location */\r\n    /*   this.geolocation.getCurrentPosition()\r\n      .then((res)=>{\r\n      let coords = res.coords.latitude+','+res.coords.longitude;\r\n      console.log(`User Location: ${coords}`);\r\n        localStorage.setItem('currentLocation', coords);\r\n    }).catch(err=> {\r\n      console.warn(err);\r\n      console.log('geolocation didn\\'t get current location');\r\n    });\r\n\r\n*/\r\n    /* works only on devices\r\n       if (cordova&& this.platform.is('android')) {\r\n         console.log('Storage Directory', cordova.file.dataDirectory)\r\n       } else {\r\n         console.log('Storage Directory', cordova.file.documentsDirectory)\r\n       }*/\r\n    let pushOptios: PushOptions = {\r\n      android: {\r\n        senderID: '146464528118'\r\n      },\r\n      ios: {\r\n        alert: 'true',\r\n        badge: true,\r\n        sound: 'false'\r\n      },\r\n      windows: {}\r\n    };\r\n\r\n    let push: PushObject = this.push.init(pushOptios);\r\n\r\n    push.on('notification').subscribe(d => {\r\n      console.log('recieve a notification');\r\n\r\n      console.log(d);\r\n    });\r\n\r\n    push.on('registration').subscribe((registration: any) => {\r\n\r\n      \r\n      let deviceData = {\r\n         regId : registration.registrationId,\r\n         platform:this.platform.is('ios') ? 'ios' : (this.platform.is('windows')?'windows':'android')\r\n      }\r\n\r\n      \r\n      console.log('Device registered', registration, registration.registrationId, this.platform.is('android') ? 'android' : 'ios');\r\n\r\n\r\n      this.pushProvider.sendDeviceToken(deviceData)\r\n        .subscribe(res=> {\r\n          console.log(res);\r\n        })\r\n      \r\n    });\r\n\r\n    push.on('error').subscribe(error => console.error('Error with Push plugin', error));\r\n\r\n    // TODO: check connection\r\n    /*\r\n     this.network.onConnect().subscribe(data=>{\r\n       console.log(data, 'You are connected to the internet');\r\n       //TODO: add a toast to show connection message\r\n       this.showToast('متصل بالانترنت')\r\n     });\r\n     */\r\n\r\n    /*\r\n         this.network.onDisconnect().subscribe(data => {\r\n          console.log(data, 'You are disconnected');\r\n          //TODO: add a toast to show connection message\r\n          this.showToast(' التطبيق يتطلب وجود اتصال للتصفح')\r\n        });\r\n\r\n    */\r\n\r\n  }\r\n\r\n  showToast(msg, dur = 3000) {\r\n    let toast = this.toastCont.create({\r\n      message: msg,\r\n      duration: dur,\r\n      position: 'bottom',\r\n      showCloseButton: true,\r\n      closeButtonText: 'x'\r\n    });\r\n\r\n    toast.onDidDismiss(() => {\r\n      //TODO: pop to the main page of the user\r\n      //console.log('moving to main page ..');\r\n\r\n    });\r\n\r\n    toast.present();\r\n  }\r\n\r\n  navigateTo(page) {\r\n    this.navCtrl.push(page);\r\n  }\r\n\r\n  navToAdv(slide:ISlider): void {\r\n    console.log('slide Data',slide);\r\n    // navigate to the advertise link or the advertise owner\r\n    console.log('You have to go to ' + slide.url_link);\r\n\r\n    //this.navCtrl.push(link)\r\n  }\r\n\r\n  openMaps() {\r\n    let pageData: any = null;\r\n    /*if (this.SignUpFrom.get('latitude').value && this.SignUpFrom.get('latitude').value) {\r\n\r\n      pageData = { latitude: this.SignUpFrom.get('latitude').value, longitude: this.SignUpFrom.get('longitude').value };\r\n    }*/\r\n    let modal = this.modalCrtl.create(MapsModal, {\r\n      pageData\r\n    });\r\n    modal.onDidDismiss((data) => {\r\n      console.log('data from modal', data);\r\n      if (data && data.latitude && data.longitude) {\r\n        console.log(data);\r\n        /*this.SignUpFrom.get('latitude').setValue(data.latitude);\r\n        this.SignUpFrom.get('longitude').setValue(data.longitude);\r\n        if (data.address)\r\n          this.locationOnMap = data.address;\r\n\r\n  */ //this.SignUpFrom.get('latitude').setValue(data.latitude);\r\n        //this.loactionOnMap = 'تم تحديد الموقع'\r\n      }\r\n\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}