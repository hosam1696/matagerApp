
<ion-header>

  <ion-navbar color="primary">
    <ion-title>طلب حجز رف</ion-title>
  </ion-navbar>

</ion-header>


<ion-content >

<ion-list >

  <ion-item no-lines id="hero">
    <ion-avatar item-left>
      <img *ngIf="pageData.avatar != '' ;else altImages" [src]="pageData.avatar" alt="profile image">
      <ng-template #altImages>
        <img class="alt" *ngIf="pageData.gender == 'female'" src="assets/img/female-alt.png">
        <img class="alt" *ngIf="pageData.gender == 'male'" src="assets/img/male-alt.png">
      </ng-template>
    </ion-avatar>
    <h3 (click)="navigateToPage('VprofilePage', pageData.send_user_id)">
      <span>{{ pageData.name }}</span>
      <span class="since-time">منذ
        {{pageData.date_added | sincedate}}
      </span>
    </h3>
    <p>{{ pageData.notifiy_message}}</p>
  </ion-item>

  <ion-item-group>
    <ion-item>
      <ion-label>طلب بداية الحجز</ion-label>
      
        <ion-label> {{pageData['start_date'] | date }} </ion-label>
      
    </ion-item>
    <ion-item>
      <ion-label>طلب نهاية الحجز</ion-label> 
      <ion-label [textContent]="pageData.end_date"></ion-label>
    </ion-item>
  </ion-item-group>

  <p text-center *ngIf="showLoader">
    <hsa-loader></hsa-loader>
  </p>
  <p class="small" text-center *ngIf="noShelf">
    لا يوجد رف
  </p>
  <section >
  
  <ion-item-group *ngIf="showShelfList">
  <ion-item padding-left ion-item>
    <ion-grid>
      <ion-row>

        <ion-col col-4>
        رقم الرف
        </ion-col>
        <ion-col col-8>
          {{shelfData.name}}
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
 
  <ion-item padding-left ion-item>
    <ion-grid>
      <ion-row>

        <ion-col col-4>
          مساحة الرف
        </ion-col>
        <ion-col col-8>
          {{shelfData.area}}
          متر
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
  <ion-item padding-left ion-item>
    <ion-grid>
      <ion-row>

        <ion-col col-4>
          سعر الرف
        </ion-col>
        <ion-col col-8>
          {{shelfData.cost}} ريال
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>

  </ion-item-group>

  


  <ion-card id="sales-percentage" *ngIf="pageData.shelf_status == 0&&pageData.percentage_status == 0&&userLocal.level_id == 2">
    <h2 text-center >طلب نسبة على البيع</h2>
    <!--<input type="text" placeholder="نسبة البيع"> -->
    <ion-range min="0" max="100" step=".5" pin="true" value="0" [(ngModel)]="salesPercentage"></ion-range>
    <p text-center>
      <button ion-button small (click)="sendPercentage()">
        ارسال للحصول على الموافقة
      </button>
    </p>
  </ion-card>

  <section *ngIf="pageData.shelf_status == 1" id="sales-percentage">
    <h4 text-center>
      لقد تمت الموافقة على طلب الحجز
    </h4>
  </section>
  <section *ngIf="pageData.shelf_status == 2" id="sales-percentage">
    <h4 text-center>
      لقد تم رفض طلب حجز هذا الرف
    </h4>
  </section>

  <section *ngIf="pageData.type=='addSalesPercentage'" id="sales-percentage">

    <h5 text-center *ngIf="pageData.percentage_status == 1">تمت الموافقة على</h5>
    <h5 text-center *ngIf="pageData.percentage_status == 2">تم رفض</h5>

    <h4 text-center>

      نسبة البيع المطلوبة
      
    </h4>

    <h1 text-center>
      {{pageData.sale_percentage}} %
    </h1>


    <p class="small" text-center *ngIf="pageData.percentage_status == 1&&userLocal.level_id == 3">
      فى انتظار موافقة <b>{{ pageData.name}}</b>
    </p>
  </section>
  
</section>

  
</ion-list>
<section id="float-btn" *ngIf="(pageData.shelf_status == 0 && pageData.percentage_status == 0)||pageData.shelf_status == 0&&userLocal.level_id==2">
  <button color="primary" (click)="sendReplyRequest()">موافقة</button>
  <button color="danger" (click)="sendReplyRequest(false)">رفض</button>
</section>
</ion-content>
