<ion-header>

    <ion-navbar color="primary">
        <ion-title>اشعارات</ion-title>
    </ion-navbar>

</ion-header>


<ion-content *ngIf="isOnline; else offline">

    <section id="notLggin" *ngIf="noUser; else signedUser">

         <button class="log-btn" (click)="navigateToPage('Login')">تسجيل الدخول</button>
        <br>

        <button class="log-btn" (click)="navigateToPage('Signup')" color="light">تسجيل حساب جديد</button>
    </section>
   
    <ng-template #signedUser>


        <p class="err-small" text-center *ngIf="netErr">
    <ion-icon name="ios-wifi"></ion-icon>

    التطبيق يتطلب اتصال بالانترنت
    </p>
    <p class="err-small" text-center *ngIf="noData &&!netError">
       <br>
        لا يوجد اشعارات حتى الان
    </p>
 <ion-refresher (ionRefresh)="refreshData($event)">
        <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="اسحب لتحديث المحتوى" refreshingSpinner="circles"
                               refreshingText="جلب المحتوى"></ion-refresher-content>
    </ion-refresher>
    <ion-list>
        <ion-item *ngFor="let notification of AllNotifications" (click)="navigateToPage(notification)"
            [color]="isRead(notification.status)">
            <ion-avatar item-left>
                <img *ngIf="notification.avatar" src="{{UPLOAD_PATH}}avatars/{{notification.avatar}}" />
                <img *ngIf="!notification.avatar && notification.gender == 'female'" src="assets/img/female-alt.png" alt="female">
                <img *ngIf="!notification.avatar && notification.gender == 'male'" src="assets/img/male-alt.png" alt="male">
            </ion-avatar>
            <div class="message-sender">
                <h4>{{ notification.name}}</h4>
                <div class="message-et" [ngClass]="{'unread': notification.status == 0}">
                    <ion-icon name="timer-outline"></ion-icon>
                    
                    <span>{{notification.date_added | amTimeAgo}}</span>
                </div>
            </div>
            <p>{{ notification['notifiy_message'] }}</p>

        </ion-item>


    </ion-list>

    <p *ngIf="!moreData && AllNotifications.length > 0"  text-center class="small">
        لا يوجد مزيد من الاشعارات
    </p> 

    <p text-center *ngIf="showLoader" class="small">
<hsa-loader></hsa-loader>
</p>
<ion-infinite-scroll *ngIf="moreData" (ionInfinite)="getMoreData($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="جلب مزيد من المحتوى..."></ion-infinite-scroll-content>
</ion-infinite-scroll>


</ng-template>


</ion-content>
<ng-template #offline>
    <ion-content id="offline">
        <div>


            <p>
            <ion-icon name="wifi"></ion-icon>
            هذه الصفحة تتطلب وجود اتصال بالانترنت
            </p>
        </div>
    </ion-content>
</ng-template>